/*
 RequireJS 2.1.14 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/

// (c) 2010-2013 Thomas Fuchs

// Zepto.js may be freely distributed under the MIT license.

var requirejs,require,define;(function(ba){function G(e){return"[object Function]"===K.call(e)}function H(e){return"[object Array]"===K.call(e)}function v(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function T(e,t){if(e){var n;for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));n-=1);}}function t(e,t){return fa.call(e,t)}function m(e,n){return t(e,n)&&e[n]}function B(e,n){for(var r in e)if(t(e,r)&&n(e[r],r))break}function U(e,n,r,i){return n&&B(n,function(n,s){if(r||!t(e,s))i&&"object"==typeof n&&n&&!H(n)&&!G(n)&&!(n instanceof RegExp)?(e[s]||(e[s]={}),U(e[s],n,r,i)):e[s]=n}),e}function u(e,t){return function(){return t.apply(e,arguments)}}function ca(e){throw e}function da(e){if(!e)return e;var t=ba;return v(e.split("."),function(e){t=t[e]}),t}function C(e,t,n,r){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=r,n&&(t.originalError=n),t}function ga(e){function n(e,t,n){var r,i,s,o,u,a,f,l,t=t&&t.split("/"),c=A.map,h=c&&c["*"];if(e){e=e.split("/"),i=e.length-1,A.nodeIdCompat&&Q.test(e[i])&&(e[i]=e[i].replace(Q,"")),"."===e[0].charAt(0)&&t&&(i=t.slice(0,t.length-1),e=i.concat(e)),i=e;for(s=0;s<i.length;s++)(o=i[s],"."===o)?(i.splice(s,1),s-=1):".."===o&&0!==s&&(1!=s||".."!==i[2])&&".."!==i[s-1]&&0<s&&(i.splice(s-1,2),s-=2);e=e.join("/")}if(n&&c&&(t||h)){i=e.split("/"),s=i.length;e:for(;0<s;s-=1){u=i.slice(0,s).join("/");if(t)for(o=t.length;0<o;o-=1)if(n=m(c,t.slice(0,o).join("/")))if(n=m(n,u)){r=n,a=s;break e}!f&&h&&m(h,u)&&(f=m(h,u),l=s)}!r&&f&&(r=f,a=l),r&&(i.splice(0,a,r),e=i.join("/"))}return(r=m(A.pkgs,e))?r:e}function r(e){z&&v(document.getElementsByTagName("script"),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===x.contextName)return t.parentNode.removeChild(t),!0})}function i(e){var t=m(A.paths,e);if(t&&H(t)&&1<t.length)return t.shift(),x.require.undef(e),x.makeRequire(null,{skipMap:!0})([e]),!0}function s(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function o(e,t,r,i){var o,u,a=null,f=t?t.name:null,l=e,c=!0,h="";return e||(c=!1,e="_@r"+(q+=1)),e=s(e),a=e[0],e=e[1],a&&(a=n(a,f,i),u=m(j,a)),e&&(a?h=u&&u.normalize?u.normalize(e,function(e){return n(e,f,i)}):-1===e.indexOf("!")?n(e,f,i):e:(h=n(e,f,i),e=s(h),a=e[0],h=e[1],r=!0,o=x.nameToUrl(h))),r=a&&!u&&!r?"_unnormalized"+(W+=1):"",{prefix:a,name:h,parentMap:t,unnormalized:!!r,url:o,originalName:l,isDefine:c,id:(a?a+"!"+h:h)+r}}function a(e){var t=e.id,n=m(O,t);return n||(n=O[t]=new x.Module(e)),n}function f(e,n,r){var i=e.id,s=m(O,i);t(j,i)&&(!s||s.defineEmitComplete)?"defined"===n&&r(j[i]):(s=a(e),s.error&&"error"===n)?r(s.error):s.on(n,r)}function l(e,t){var n=e.requireModules,r=!1;t?t(e):(v(n,function(t){if(t=m(O,t))t.error=e,t.events.error&&(r=!0,t.emit("error",e))}),!r)&&g.onError(e)}function c(){R.length&&(ha.apply(P,[P.length,0].concat(R)),R=[])}function h(e){delete O[e],delete _[e]}function p(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,v(e.depMaps,function(r,i){var s=r.id,o=m(O,s);o&&!e.depMatched[i]&&!n[s]&&(m(t,s)?(e.defineDep(i,j[s]),e.check()):p(o,t,n))}),n[r]=!0)}function d(){var e,t,n=(e=1e3*A.waitSeconds)&&x.startTime+e<(new Date).getTime(),s=[],o=[],u=!1,a=!0;if(!E){E=!0,B(_,function(e){var f=e.map,l=f.id;if(e.enabled&&(f.isDefine||o.push(e),!e.error))if(!e.inited&&n)i(l)?u=t=!0:(s.push(l),r(l));else if(!e.inited&&e.fetched&&f.isDefine&&(u=!0,!f.prefix))return a=!1});if(n&&s.length)return e=C("timeout","Load timeout for modules: "+s,null,s),e.contextName=x.contextName,l(e);a&&v(o,function(e){p(e,{},{})}),(!n||t)&&u&&(z||ea)&&!L&&(L=setTimeout(function(){L=0,d()},50)),E=!1}}function y(e){t(j,e[0])||a(o(e[0],null,!0)).init(e[1],e[2])}function b(e){var e=e.currentTarget||e.srcElement,t=x.onScriptLoad;return e.detachEvent&&!Y?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=x.onScriptError,(!e.detachEvent||Y)&&e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function w(){var e;for(c();P.length;){e=P.shift();if(null===e[0])return l(C("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));y(e)}}var E,S,x,k,L,A={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},O={},_={},D={},P=[],j={},F={},I={},q=1,W=1;return k={require:function(e){return e.require?e.require:e.require=x.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?j[e.map.id]=e.exports:e.exports=j[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return m(A.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},S=function(e){this.events=m(D,e.id)||{},this.map=e,this.shim=m(A.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},S.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=u(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,x.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();x.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;F[e]||(F[e]=!0,x.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id;t=this.depExports;var r=this.exports,i=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(G(i)){if(this.events.error&&this.map.isDefine||g.onError!==ca)try{r=x.execCb(n,i,t,r)}catch(s){e=s}else r=x.execCb(n,i,t,r);this.map.isDefine&&void 0===r&&((t=this.module)?r=t.exports:this.usingExports&&(r=this.exports));if(e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",l(this.error=e)}else r=i;this.exports=r,this.map.isDefine&&!this.ignore&&(j[n]=r,g.onResourceLoad)&&g.onResourceLoad(x,this.map,this.depMaps),h(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,r=e.id,i=o(e.prefix);this.depMaps.push(i),f(i,"defined",u(this,function(i){var s,c;c=m(I,this.map.id);var p=this.map.name,d=this.map.parentMap?this.map.parentMap.name:null,v=x.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(i.normalize&&(p=i.normalize(p,function(e){return n(e,d,!0)})||""),i=o(e.prefix+"!"+p,this.map.parentMap),f(i,"defined",u(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),c=m(O,i.id))this.depMaps.push(i),this.events.error&&c.on("error",u(this,function(e){this.emit("error",e)})),c.enable()}else c?(this.map.url=x.nameToUrl(c),this.load()):(s=u(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),s.error=u(this,function(e){this.inited=!0,this.error=e,e.requireModules=[r],B(O,function(e){0===e.map.id.indexOf(r+"_unnormalized")&&h(e.map.id)}),l(e)}),s.fromText=u(this,function(n,i){var u=e.name,f=o(u),c=M;i&&(n=i),c&&(M=!1),a(f),t(A.config,r)&&(A.config[u]=A.config[r]);try{g.exec(n)}catch(h){return l(C("fromtexteval","fromText eval for "+r+" failed: "+h,h,[r]))}c&&(M=!0),this.depMaps.push(f),x.completeLoad(u),v([u],s)}),i.load(e.name,v,s,A))})),x.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){_[this.map.id]=this,this.enabling=this.enabled=!0,v(this.depMaps,u(this,function(e,n){var r,i;if("string"==typeof e){e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[n]=e;if(r=m(k,e.id)){this.depExports[n]=r(this);return}this.depCount+=1,f(e,"defined",u(this,function(e){this.defineDep(n,e),this.check()})),this.errback&&f(e,"error",u(this,this.errback))}r=e.id,i=O[r],!t(k,r)&&i&&!i.enabled&&x.enable(e,this)})),B(this.pluginMaps,u(this,function(e){var t=m(O,e.id);t&&!t.enabled&&x.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){v(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},x={config:A,contextName:e,registry:O,defined:j,urlFetched:F,defQueue:P,Module:S,makeModuleMap:o,nextTick:g.nextTick,onError:l,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=A.shim,n={paths:!0,bundles:!0,config:!0,map:!0};B(e,function(e,t){n[t]?(A[t]||(A[t]={}),U(A[t],e,!0,!0)):A[t]=e}),e.bundles&&B(e.bundles,function(e,t){v(e,function(e){e!==t&&(I[e]=t)})}),e.shim&&(B(e.shim,function(e,n){H(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=x.makeShimExports(e)),t[n]=e}),A.shim=t),e.packages&&v(e.packages,function(e){var t,e="string"==typeof e?{name:e}:e;t=e.name,e.location&&(A.paths[t]=e.location),A.pkgs[t]=e.name+"/"+(e.main||"main").replace(ia,"").replace(Q,"")}),B(O,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=o(t))}),(e.deps||e.callback)&&x.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(ba,arguments)),t||e.exports&&da(e.exports)}},makeRequire:function(i,s){function u(n,r,f){var c,h;return s.enableBuildCallback&&r&&G(r)&&(r.__requireJsBuild=!0),"string"==typeof n?G(r)?l(C("requireargs","Invalid require call"),f):i&&t(k,n)?k[n](O[i.id]):g.get?g.get(x,n,i,u):(c=o(n,i,!1,!0),c=c.id,t(j,c)?j[c]:l(C("notloaded",'Module name "'+c+'" has not been loaded yet for context: '+e+(i?"":". Use require([])")))):(w(),x.nextTick(function(){w(),h=a(o(null,i)),h.skipMap=s.skipMap,h.init(n,r,f,{enabled:!0}),d()}),u)}return s=s||{},U(u,{isBrowser:z,toUrl:function(e){var t,r=e.lastIndexOf("."),s=e.split("/")[0];return-1!==r&&("."!==s&&".."!==s||1<r)&&(t=e.substring(r,e.length),e=e.substring(0,r)),x.nameToUrl(n(e,i&&i.id,!0),t,!0)},defined:function(e){return t(j,o(e,i,!1,!0).id)},specified:function(e){return e=o(e,i,!1,!0).id,t(j,e)||t(O,e)}}),i||(u.undef=function(e){c();var t=o(e,i,!0),n=m(O,e);r(e),delete j[e],delete F[t.url],delete D[e],T(P,function(t,n){t[0]===e&&P.splice(n,1)}),n&&(n.events.defined&&(D[e]=n.events),h(e))}),u},enable:function(e){m(O,e.id)&&a(e).enable()},completeLoad:function(e){var n,r,s=m(A.shim,e)||{},o=s.exports;for(c();P.length;){r=P.shift();if(null===r[0]){r[0]=e;if(n)break;n=!0}else r[0]===e&&(n=!0);y(r)}r=m(O,e);if(!n&&!t(j,e)&&r&&!r.inited){if(A.enforceDefine&&(!o||!da(o)))return i(e)?void 0:l(C("nodefine","No define call for "+e,null,[e]));y([e,s.deps||[],s.exportsFn])}d()},nameToUrl:function(e,t,n){var r,i,s;(r=m(A.pkgs,e))&&(e=r);if(r=m(I,e))return x.nameToUrl(r,t,n);if(g.jsExtRegExp.test(e))r=e+(t||"");else{r=A.paths,e=e.split("/");for(i=e.length;0<i;i-=1)if(s=e.slice(0,i).join("/"),s=m(r,s)){H(s)&&(s=s[0]),e.splice(0,i,s);break}r=e.join("/"),r+=t||(/^data\:|\?/.test(r)||n?"":".js"),r=("/"===r.charAt(0)||r.match(/^[\w\+\.\-]+:/)?"":A.baseUrl)+r}return A.urlArgs?r+((-1===r.indexOf("?")?"?":"&")+A.urlArgs):r},load:function(e,t){g.load(x,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||ja.test((e.currentTarget||e.srcElement).readyState))N=null,e=b(e),x.completeLoad(e.id)},onScriptError:function(e){var t=b(e);if(!i(t.id))return l(C("scripterror","Script error for: "+t.id,e,[t.id]))}},x.require=x.makeRequire(),x}var g,x,y,D,I,E,N,J,s,O,ka=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,la=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ia=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,ha=Array.prototype.splice,z="undefined"!=typeof window&&"undefined"!=typeof navigator&&!!window.document,ea=!z&&"undefined"!=typeof importScripts,ja=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},q={},R=[],M=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(G(requirejs))return;q=requirejs,requirejs=void 0}"undefined"!=typeof require&&!G(require)&&(q=require,require=void 0),g=requirejs=function(e,t,n,r){var i,s="_";return!H(e)&&"string"!=typeof e&&(i=e,H(t)?(e=t,t=n,n=r):e=[]),i&&i.context&&(s=i.context),(r=m(F,s))||(r=F[s]=g.s.newContext(s)),i&&r.configure(i),r.require(e,t,n)},g.config=function(e){return g(e)},g.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=g),g.version="2.1.14",g.jsExtRegExp=/^\/|:|\?|\.js$/,g.isBrowser=z,x=g.s={contexts:F,newContext:ga},g({}),v(["toUrl","undef","defined","specified"],function(e){g[e]=function(){var t=F._;return t.require[e].apply(t,arguments)}}),z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(y=x.head=D.parentNode),g.onError=ca,g.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},g.load=function(e,t,n){var r=e&&e.config||{};if(z)return r=g.createNode(r,t,n),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),r.attachEvent&&!(r.attachEvent.toString&&0>r.attachEvent.toString().indexOf("[native code"))&&!Y?(M=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)):(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)),r.src=n,J=r,D?y.insertBefore(r,D):y.appendChild(r),J=null,r;if(ea)try{importScripts(n),e.completeLoad(t)}catch(i){e.onError(C("importscripts","importScripts failed for "+t+" at "+n,i,[t]))}},z&&!q.skipDataMain&&T(document.getElementsByTagName("script"),function(e){y||(y=e.parentNode);if(I=e.getAttribute("data-main"))return s=I,q.baseUrl||(E=s.split("/"),s=E.pop(),O=E.length?E.join("/")+"/":"./",q.baseUrl=O),s=s.replace(Q,""),g.jsExtRegExp.test(s)&&(s=I),q.deps=q.deps?q.deps.concat(s):[s],!0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),H(t)||(n=t,t=null),!t&&G(n)&&(t=[],n.length&&(n.toString().replace(ka,"").replace(la,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),M&&((r=J)||(N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),function(e){if("interactive"===e.readyState)return N=e}),r=N),r&&(e||(e=r.getAttribute("data-requiremodule")),i=F[r.getAttribute("data-requirecontext")])),(i?i.defQueue:R).push([e,t,n])},define.amd={jQuery:!0},g.exec=function(b){return eval(b)},g(q)}})(this),define("require.js",function(){}),define("sensor/util",[],function(){function e(e){return n===""?e:(e=e.charAt(0).toUpperCase()+e.substr(1),n+e)}function h(e,t,n){for(var r in t)if(t.hasOwnProperty(r)){if(!n&&e.hasOwnProperty(r))continue;e[r]=t[r]}return e}var t=document.createElement("div").style,n=function(){var e="t,webkitT,MozT,msT,OT".split(","),n,r=0,i=e.length;for(;r<i;r++){n=e[r]+"ransform";if(n in t)return e[r].substr(0,e[r].length-1)}return!1}(),r=function(){return window.requestAnimationFrame||window[n+"RequestAnimationFrame"]||function(e){return setTimeout(e,1e3/60)}}(),i=function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window[n+"RequestAnimationFrame"]||clearTimeout}(),s=/firefox/i.test(navigator.userAgent),o=Object.prototype.toString,u=function(e){return"[object Function]"===o.call(e)},a=function(e){return"[object String]"===o.call(e)},f=function(e){return"[object Array]"===o.call(e)},l=function(e){return a(e)?document.getElementById(e):e},c=function(e,t){var t=t||document.body,n=e.offsetLeft,r=e.offsetTop,i=e.offsetParent;while(i&&i!=t&&i!=document.body)n+=i.offsetLeft,r+=i.offsetTop,i=i.offsetParent;return[n,r]},p={nextFrame:function(e){return r(e)},cancelFrame:function(e){i(e)},setCssPrefix:e,styleVender:n,isFirefox:s,isFunction:u,isString:a,isArray:f,getElement:l,getOffset:c,extend:h};return p}),define("sensor/wave",[],function(){var e,t,n,r;return t=function(e){function t(e){var t=[].slice.call(arguments,0);Object.prototype.toString.call(t[0])==="[object Array]"&&(t=t[0]);if(t.length%2)throw"coordinate count should be even.";this.points=[];for(var n=0;n<t.length;n+=2)this.points.push({x:t[n],y:t[n+1]});this.actualPoints=this.points.slice(0),this.actualPoints.unshift({x:0,y:0}),this.actualPoints.push({x:1,y:1}),this.sampleCache={},this.factorialCache={},this.order=this.actualPoints.length-1,this.splineSampleCount=11,this.splineSamples=[],this.splineInterval=1/(this.splineSampleCount-1),this.calcSplineSamples()}return t.consts={NEWTON_ITERATIONS:4,NEWTON_MIN_SLOPE:.001,SUBDIVISION_PRECISION:1e-7,SUBDIVISION_MAX_ITERATIONS:10},t.prototype.calcSplineSamples=function(){for(var e=0;e<this.splineSampleCount;e++)this.splineSamples[e]=this.getFromT(e*this.splineInterval)},t.prototype.get=function(e){var t=this.getTFromX(e);return this.getFromT(t).y},t.prototype.getTFromX=function(e){var n=0,r=0;for(var i=1;i<this.splineSampleCount;i++)if(i===this.splineSampleCount-1||this.splineSamples[i].x>e){n=this.splineInterval*(i-1),r=i-1;break}var s=n+this.splineInterval*(e-this.splineSamples[r].x)/(this.splineSamples[r+1].x-this.splineSamples[r].x),o=this.getDerivativeFromT(s);return o.x>=t.consts.NEWTON_MIN_SLOPE?this.runNewtonRaphsonIterate(e,s):o.x==0?s:this.runBinarySubdivide(e,n,n+this.splineInterval)},t.prototype.runNewtonRaphsonIterate=function(e,n){for(var r=0;r<t.consts.NEWTON_ITERATIONS;r++){var i=this.getDerivativeFromT(n);if(i.x==0)return n;var s=this.getFromT(n).x-e;n-=s/i.x}return n},t.prototype.runBinarySubdivide=function(e,n,r){var i;for(var s=0;s<t.consts.SUBDIVISION_MAX_ITERATIONS;s++){i=n+(r-n)/2;var o=this.getFromT(i).x-e;if(o<=t.consts.SUBDIVISION_PRECISION)return i;o>0?r=i:n=i}return i},t.prototype.getFromT=function(e){var t=this.getCoefficients(),n=0,r=0,i=this.order;for(var s=0;s<=i;s++)n+=t[s].x*Math.pow(e,s),r+=t[s].y*Math.pow(e,s);return{x:n,y:r}},t.prototype.getCoefficients=function(){if(this.coefficients)return this.coefficients;var e=this.order;this.coefficients=[];for(var t=0;t<=e;t++){var n=0,r=0;for(var i=0;i<=t;i++){var s=Math.pow(-1,i+t)/(this.getFactorial(i)*this.getFactorial(t-i));n+=s*this.actualPoints[i].x,r+=s*this.actualPoints[i].y}var o=this.getFactorial(e)/this.getFactorial(e-t);this.coefficients.push({x:o*n,y:o*r})}return this.coefficients},t.prototype.getFactorial=function(e){return this.factorialCache[e]?this.factorialCache[e]:e===0?1:(this.factorialCache[e]=e*this.getFactorial(e-1),this.factorialCache[e])},t.prototype.getDerivativeFromT=function(e){var t=this.getCoefficients(),n=0,r=0,i=this.order;for(var s=1;s<=i;s++)n+=s*t[s].x*Math.pow(e,s-1),r+=s*t[s].y*Math.pow(e,s-1);return{x:n,y:r}},t.prototype.getSamples=function(e){if(this.sampleCache[e])return this.sampleCache[e];var t=[];for(var n=0;n<e;n++)t.push(this.get(n/(e-1)));this.sampleCache[e]=t},t.prototype.getEasing=function(){var e=this;return function(t){return e.get(t)}},t}({}),n=function(e){var n={Quad:function(e){return e*e},Cubic:function(e){return e*e*e},Quart:function(e){return e*e*e*e},Qunit:function(e){return e*e*e*e*e},Expo:function(e){return e*e*e*e*e*e},Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Back:function(e){return e*e*(3*e-2)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}},r=t,i={B2ToLinear:function(){var e=(new r(0,.4,.2,.4,.4,.55)).getEasing();return function(t){return e(t)}}()};return{easeInCurves:n,fastInCurves:i}}({}),r={repeat:function(e,t){var n=t*2-1;return function(t){var r=t*n,i=Math.floor(r),s=r-i,o=e(s);return i%2&&(o=1-o),o}},reverse:function(e){return function(t){return 1-e(1-t)}},reflect:function(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}},e=function(e){function p(e){return Object.prototype.toString.call(e)==="[object String]"?s[e]||null:Object.prototype.toString.call(e)==="[object Array]"?(new i(e)).getEasing():null}var i=t,s={linear:function(e){return e},none:function(e){return 0},full:function(e){return 1},reverse:function(e){return 1-e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(e*4.5*Math.PI)*Math.exp(-e*6)}},o=n,u=r,a=o.easeInCurves;for(var f in a){var l=a[f];s["easeIn"+f]=l,s["easeOut"+f]=u.reverse(l),s["easeInOut"+f]=u.reflect(l),s["easeOutIn"+f]=u.reflect(u.reverse(l))}var c=o.fastInCurves;for(var f in c){var l=c[f];s["fastIn"+f]=l,s["fastOut"+f]=u.reverse(l),s["fastInOut"+f]=u.reflect(l),s["fastOutIn"+f]=u.reflect(u.reverse(l))}var h={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]};for(var f in h)s[f]=(new i(h[f])).getEasing();return p.register=function(e,t){if(Object.prototype.toString.call(t)==="[object Function]")s[e]=t;else{var n=p(t);if(!n)throw"unregisterable";s[e]=n}},p.getMap=function(){return s},p}({}),e}),define("sensor/erasableMask",["sensor/util","sensor/wave"],function(e,t){var n=function(t,n){var t=e.getElement(t);if(!t){alert("必须要配置使用遮罩的DOM节点。");return}this.maskedDom=t,this._configs={left:0,top:0,color:"#666",alpha:100,checkDistance:20,radius:20,alphaRadius:10,showPoint:!1},e.isFunction(n)?this.setCallback(n):e.extend(this._configs,n||{},!0)},r="ontouchstart"in window,i=r?"touchstart":"mousedown",s=r?"touchmove":"mousemove",o=r?"touchend":"mouseup",u=r?"touchcancel":"mouseleave";return n.prototype.setCallback=function(e){return this._configs.callback=e,this},n.prototype.detectViewport=function(){var t=this._configs,n=this.maskedDom,r=document.documentElement.clientHeight,i=t.width?t.width:n.offsetWidth-n.clientLeft-window.parseInt(getComputedStyle(n).borderRightWidth),s=t.height?t.height:n.offsetHeight-n.clientTop-window.parseInt(getComputedStyle(n).borderBottomWidth);this.maskWidth=i-t.left,this.maskHeight=s-t.top,this.maskedDom===document.body?this.calculHeight=r:this.calculHeight=s,this.transformStr=e.setCssPrefix("transform")},n.prototype.generateMask=function(){this.maskCanvas=document.createElement("canvas");var e="background-color: transparent;";e+="position: absolute;",e+="z-index: 3;",e+="left: "+this._configs.left+"px;",e+="top: "+this._configs.top+"px;",this.maskCanvas.style.cssText+=e;var t=getComputedStyle(this.maskedDom);"absolute"!==t.position&&"relative"!==t.position&&(this.maskedDom.style.position="relative"),this.originOverflow=t.overflow||"",this.maskedDom.style.overflow="hidden",this._configs.alpha&&this.setOpacity(this._configs.alpha),this.maskedDom.appendChild(this.maskCanvas)},n.prototype.setOpacity=function(e){return this.maskCanvas.style.opacity=e/100,this._configs.alpha=e,this},n.prototype.configMask=function(t){var n=this,r=this.maskedDom,i=this._configs;this.detectViewport(),i.eraseImage&&this.createEraseImage(),i.eraseCoverImage&&this.createEraseCoverImage(),i.eraseCoverText&&(this.airIndexTip=this.buildAirIndexTip(this.maskWidth/2,this.calculHeight/2,i.eraseCoverImageWidth,i.eraseCoverImageHeight),this.buildAirIndexText(i.eraseCoverText,i.eraseCoverTextDesc));if(i.logoImage)this.handleLogo();else if(i.logoDom){this.logoImage=e.getElement(i.logoDom);var s=e.getOffset(this.logoImage);this._logoLeft=s[0],this._logoTop=s[1]}i.closeImg&&this.createCloseImage(),i.backgroundImage&&this.createBackgroundImage(),t&&t(),this.setMaskSize()},n.prototype.setMaskSize=function(){var e=this,t=this.maskedDom,n=this._configs;this.maskCanvas.width=this.maskWidth,this.maskCanvas.height=this.maskHeight;var r=t.getBoundingClientRect();this._offsetX=r.left+document.body.scrollLeft+t.clientLeft,this._offsetY=r.top+document.body.scrollTop+t.clientTop;var i=this.maskCanvas.getContext("2d");if(n.maskImage){var e=this,s=document.createElement("img");s.src=n.maskImage,s.style.display="none",document.body&&document.body.appendChild(s),s.addEventListener("load",function(){i.drawImage(s,0,0,e.maskWidth,e.maskHeight),i.globalCompositeOperation="destination-out",document.body&&document.body.removeChild(s),s=null,e.generateCheckPoints();try{i.getImageData(0,0,1,1)}catch(t){e.isTainted=!0}},!1)}else i.fillStyle=n.color,i.fillRect(0,0,this.maskWidth,this.maskHeight),this.generateCheckPoints(),i.globalCompositeOperation="destination-out"},n.prototype.createEraseImage=function(){var e=this._configs,t=-e.angle;this.eraseImage=this.createFloatImage(e.eraseImage,this.maskWidth/2,this.calculHeight/2,e.eraseImageWidth,e.eraseImageHeight),t&&!e.eraseCoverImage&&(this.eraseImage.style[this.transformStr]="rotate("+t+"deg)")},n.prototype.createCloseImage=function(){var e=this._configs,t=this,n=this._logoTop+this.logoImage.offsetHeight/2-5;this.closeImage=this.createFloatImage(e.closeImg,this.maskWidth-29,n,27,27),this.closeImage.addEventListener("click",function(){e.onClose&&e.onClose()},!1)},n.prototype.createBackgroundImage=function(){var t=this._configs,n=this.maskWidth,r=this.calculHeight,i=this;this.backgroundImage=this.createFloatDom("div",n/2,r-t.backgroundImageHeight/2,n,t.backgroundImageHeight/t.backgroundImageWidth*n,function(n){if(e.isString(t.backgroundImage)){var r="background-image: url("+t.backgroundImage+");background-repeat: no-repeat;";r+="background-size: 100% 100%;",n.style.cssText+=r}},2)},n.prototype.createEraseCoverImage=function(){var e=this._configs,t=-e.angle;this._isEraseCovered=!0;var n=this.maskWidth,r=this.calculHeight;this.eraseCoverImage=this.createFloatImage(e.eraseCoverImage,n/2,r/2,e.eraseCoverImageWidth,e.eraseCoverImageHeight),this.eraseCoverImage.style.zIndex=5;var u=this;this.eraseCoverImage.addEventListener(i,function(e){u.maskedDom.removeChild(u.eraseCoverImage),u.maskedDom.removeChild(u.eraseCoverImageBg),u.eraseCoverImage=null,u.eraseCoverImageBg=null,u.airIndexTip&&(u.maskedDom.removeChild(u.airIndexTip),u.airIndexTip=null),u.eraseImage.style[u.transformStr]="rotate("+t+"deg)",u._isEraseCovered=!1,u.startErase(e)},!1),this.eraseCoverImage.addEventListener(s,this,!1),this.eraseCoverImage.addEventListener(o,this,!1),this.eraseCoverImageBg=this.createFloatDom("div",n/2,r/2,80,80,function(e){u.createAnim(e,n/2,r/2);var t="z-index: 3;background-color: #20b9e4; opacity: 0.4;border-radius:50px;";e.style.cssText+=t}),this.eraseCoverImage.style.zIndex=5},n.prototype.createAnim=function(e,t,n){this.preStyleDom&&document.head.removeChild(this.preStyleDom);var r=document.createElement("style"),i="width:80px;height:80px;left:"+(t-40)+"px;"+"top:"+(n-40)+"px;opacity: 0.4;border-radius:40px;",s="width:80px;height:80px;left:"+(t-40)+"px;"+"top:"+(n-40)+"px;opacity: 0;border-radius:40px;",o="width:150px;height:150px;left:"+(t-75)+"px; "+"top:"+(n-75)+"px;opacity: 0;border-radius:75px;";this.preStyleDom=r,this.preStyleIdx=this.preStyleIdx?this.preStyleIdx+1:1,r.innerHTML="@-webkit-keyframes sensorCoverBigger"+this.preStyleIdx+" {"+"0%{"+i+"}"+"90%{"+o+"}"+"95%{"+s+"}"+"100%{"+i+"}}"+"@-moz-keyframes sensorCoverBigger {"+"0%{"+i+"}"+"90%{"+o+"}"+"95%{"+s+"}"+"100%{"+i+"}}"+"@keyframes sensorCoverBigger {"+"0%{"+i+"}"+"90%{"+o+"}"+"95%{"+s+"}"+"100%{"+i+"}}";var u="-webkit-animation:sensorCoverBigger"+this.preStyleIdx+" 2s 1s forwards linear infinite;";u+="-moz-animation:sensorCoverBigger"+this.preStyleIdx+" 2s 1s forwards linear infinite;",u+="animation:sensorCoverBigger"+this.preStyleIdx+" 2s 1s forwards linear infinite;",e.style.cssText+=u,document.head.appendChild(r)},n.prototype.handleLogo=function(){var t=this._configs;if(e.isString(t.logoImage)){t.logoDom?this.logoImage=e.getElement(t.logoDom):this.logoImage=document.createElement("div");var n="background-image: url("+t.logoImage+");background-repeat: no-repeat;";n+="background-position: 4px 3px;",n+="background-size: "+t.logoWidth+"px "+t.logoHeight+"px;",this.logoImage.style.cssText+=n;if(t.logoLink){var r=getComputedStyle(this.logoImage);"absolute"!==r.position&&"relative"!==r.position&&(this.logoImage.style.position="relative");var s=document.createElement("a");s.href=t.logoLink,s.style.cssText="position:absolute;width:100%;height:100%;",this.logoImage.appendChild(s)}t.logoDom||this.maskedDom.appendChild(this.logoImage)}else this.logoImage=t.logoImage;var o=e.getOffset(this.logoImage);this._logoLeft=o[0],this._logoTop=o[1];var u=this;this.logoImage.addEventListener(i,function(){u._configs.logoClickStart&&u.start(),u.onLogoClick&&u.onLogoClick()},!1)},n.prototype.refreshMaskSize=function(){var t=this._configs;this.detectViewport(),this.setMaskSize();var n=this.maskWidth,r=this.calculHeight;this.eraseImage&&(this.eraseImage.style.left=(n-t.eraseImageWidth)/2+"px",this.eraseImage.style.top=(r-t.eraseImageHeight)/2+"px"),this.eraseCoverImage&&(this.eraseCoverImage.style.left=(n-t.eraseCoverImageWidth)/2+"px",this.eraseCoverImage.style.top=(r-t.eraseCoverImageHeight)/2+"px"),this.eraseCoverImageBg&&(this.eraseCoverImageBg.style.left=n/2-40+"px",this.eraseCoverImageBg.style.top=r/2-40+"px",this.createAnim(this.eraseCoverImageBg,n/2,r/2)),this.airIndexTip&&(this.airIndexTip.style.left=(n-t.eraseCoverImageWidth)/2+"px",this.airIndexTip.style.top=(r+t.eraseCoverImageHeight)/2-20+"px");if(this.logoImage||this.logoDom){var i=e.getOffset(this.logoImage);this._logoLeft=i[0],this._logoTop=i[1]}if(this.closeImage){var s=this.maskWidth-42.5,o=this._logoTop+this.logoImage.offsetHeight/2-18.5;this.closeImage.style.left=s+"px",this.closeImage.style.top=o+"px"}return this.backgroundImage&&(this.backgroundImage.style.left=n/2,this.backgroundImage.style.top=r-t.backgroundImageHeight/2,this.backgroundImage.style.width=n+"px",this.backgroundImage.style.height=t.backgroundImageHeight/t.backgroundImageWidth*n+"px"),this},n.prototype.start=function(){function t(t){e._configs.showPoint&&e.getErasePercent(!0),e.eraseImage&&(e.eraseImage.addEventListener(i,e,!1),e.eraseImage.addEventListener(s,e,!1),e.eraseImage.addEventListener(o,e,!1))}var e=this;if(!e.maskedDom)return;return e.maskCanvas||e.generateMask(),this.maskCanvas.addEventListener(i,function(e){e.preventDefault()},!1),this.maskCanvas.addEventListener(s,function(e){e.preventDefault()},!1),this.maskCanvas.addEventListener(i,this,!1),this.maskCanvas.addEventListener(s,this,!1),this.maskCanvas.addEventListener(o,this,!1),this.maskCanvas.addEventListener(u,this,!1),e.configMask(t),this},n.prototype.clearMask=function(n,r){function d(){p.clearRainDrop(),a.clearRect(0,0,p.maskCanvas.width,p.maskCanvas.height),p.eraseCoverImage&&(p.maskedDom.removeChild(p.eraseCoverImage),p.maskedDom.removeChild(p.eraseCoverImageBg),p.eraseCoverImage=null,p.eraseCoverImageBg=null),p.airIndexTip&&(p.maskedDom.removeChild(p.airIndexTip),p.airIndexTip=null),p.closeImage&&(p.maskedDom.removeChild(p.closeImage),p.closeImage=null),p.backgroundImage&&(p.maskedDom.removeChild(p.backgroundImage),p.backgroundImage=null),r()}function v(){if(!p.maskCanvas)return;var t=(Date.now()-f)/n;if(t>1){d();return}h=(1-l(t))*c,p.maskCanvas.style.opacity=h,p.setRainDropOpacity(h),e.nextFrame(v)}this.maskCanvas.removeEventListener(i,this,!1),this.maskCanvas.removeEventListener(s,this,!1),this.maskCanvas.removeEventListener(o,this,!1),this.maskCanvas.removeEventListener(u,this,!1),this.eraseImage&&(this.eraseImage.removeEventListener(i,this,!1),this.eraseImage.removeEventListener(s,this,!1),this.eraseImage.removeEventListener(o,this,!1));var a=this.maskCanvas.getContext("2d"),f=Date.now(),l=t("ease-out"),c=this._configs.alpha/100||1,h,p=this;return n?v():(d(),r()),this},n.prototype.stop=function(){if(!this.maskedDom)return;return this.maskedDom.removeChild(this.maskCanvas),this.maskCanvas=null,this.maskedDom.style.overflow=this.maskedDom.originOverflow,this},n.prototype.handleEvent=function(e){if(this._isEraseCovered)return;switch(e.type){case i:return this.startErase(e);case s:return this.doErase(e);case o:return this.endErase(e);case u:return this.endErase(e)}},n.prototype.startErase=function(e){e.preventDefault(),this._startedErase=!0,this.eraseRecords=[]},n.prototype.doErase=function(e){e.preventDefault();if(this._startedErase){e.changedTouches&&(e=e.changedTouches[e.changedTouches.length-1]);var t=(e.clientX+document.body.scrollLeft||e.pageX)-this._offsetX||0,n=(e.clientY+document.body.scrollTop||e.pageY)-this._offsetY||0;this._configs.onStart&&!this._firedOnStart&&(this._configs.onStart(t,n),this._firedOnStart=!0),this.eraseImage&&(this.eraseImage.style.left=t-this.eraseImage.offsetWidth/2+"px",this.eraseImage.style.top=n-this.eraseImage.offsetHeight/2+"px");var r=this._configs.radius,i=this.maskCanvas.getContext("2d");i.beginPath(),this._configs.eraseWidth?(i.fillStyle="#000",this.eraseOval(i,t-this._configs.left,n-this._configs.top,this._configs.eraseWidth,this._configs.eraseHeight,-this._configs.angle,this._configs.alphaRadius),i.fillStyle="#000"):r&&(this.eraseCircle(i,t-this._configs.left,n-this._configs.top,r,this._configs.alphaRadius),i.fillStyle="#000"),this.isTainted&&this.eraseRecords.push([t,n]),this._prevX=t,this._prevY=n}else this._prevX=0,this._prevY=0},n.prototype.eraseCircle=function(e,t,n,r,i){e.beginPath();if(i){var s=r+i,o=e.createRadialGradient(t,n,r,t,n,s);o.addColorStop(0,"rgba(255, 255, 255, 1)"),o.addColorStop(1,"rgba(255, 255, 255, 0)"),e.fillStyle=o,e.arc(t,n,s,0,Math.PI*2)}else e.arc(t,n,r,0,Math.PI*2);e.fill()},n.prototype.eraseRect=function(e,t,n,r,i,s){s?(e.save(),e.translate(t,n),e.rotate(s*Math.PI/180),e.fillRect(-r/2,-i/2,r,i),e.restore()):e.fillRect(t-r/2,n-i/2,r,i)},n.prototype.eraseOval=function(e,t,n,r,i,s,o){function u(t,n,r,i){var s=r/.6/2,u=i/2;o&&(u+=o),e.beginPath(),e.moveTo(t,n-u),e.bezierCurveTo(t+s,n-u,t+s,n+u,t,n+u),e.bezierCurveTo(t-s,n+u,t-s,n-u,t,n-u);if(o){var a=0,f=i+o,l=e.createRadialGradient(t,n,a,t,n,f);l.addColorStop(0,"rgba(255, 255, 255, 1)"),l.addColorStop(1,"rgba(255, 255, 255, 0)"),e.fillStyle=l}e.fill(),e.closePath()}s?(e.save(),e.translate(t,n),e.rotate(s*Math.PI/180),u(0,0,r,i),e.restore()):u(t,n,r,i)},n.prototype.endErase=function(e){if(!this._startedErase)return;e.preventDefault(),this._startedErase=!1;var t=this.getErasePercent();this._configs.callback&&this._configs.callback(t*100,this._prevX,this._prevY)},n.prototype.generateCheckPoints=function(){this.checkPoints=[];var e=this.maskCanvas.width-this._configs.left,t=this.calculHeight-this._configs.top,n=this._configs.checkDistance,r=Math.ceil(e/n),i=Math.ceil(t/n),s,o;for(var u=0;u<r;u++)for(var a=0;a<i;a++)u===r-1?s=e/2+(r-1)*n/2:s=window.parseInt(n/2+u*n),a===i-1?o=t/2+(i-1)*n/2:o=window.parseInt(n/2+a*n),this.checkPoints.push([s,o,0])},n.prototype.getErasePercent=function(e){var t=this.maskCanvas.width,n=this.maskCanvas.height,r=this.maskCanvas.getContext("2d"),i;this.isTainted||(i=r.getImageData(0,0,t,n));if(this.isTainted&&!e)return this.getErasePercentByRecord();var s,o,u,a=0;e&&(r.globalCompositeOperation="source-over",r.fillStyle="#000");var f=this.checkPoints,l=f.length;for(var c=0;c<l;c++)s=f[c][0],o=f[c][1],this.isTainted||(u=this.getColorValue(i,s,o),0===u[3]&&a++),e&&r.fillRect(s,o,1,1);if(!e)return a/l;r.globalCompositeOperation="destination-out"},n.prototype.getErasePercentByRecord=function(){var e=this.eraseRecords,t=this.checkPoints,n=t.length,r=0,i=0,s;for(var o=0,u=e.length;o<u;o++){s=this.getNeedCheckArr(e[o]);for(var a=0;a<n;a++){r++;if(t[a][2])continue;i++,this._configs.radius>=this.calculateDis(e[o],t[a])&&(t[a][2]=1)}}var f=0;for(var l=0;l<n;l++)t[l][2]&&f++;return f/n},n.prototype.getNeedCheckArr=function(e){},n.prototype.calculateDis=function(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))},n.prototype.getColorValue=function(e,t,n){var r=(t+n*e.width)*4,i=e.data[r],s=e.data[r+1],o=e.data[r+2],u=e.data[r+3];return[i,s,o,u]},n.prototype.rainDrop=function(n,r,i,s,o,u,a){function m(){if(!l.maskCanvas)return;var t=(Date.now()-h)/u;if(t>1){l.eraseRect(c,r,i+a/2,s,a),l.eraseCircle(c,r,i+a,s/2);return}v=d(t)*a,l.eraseRect(c,r,i+d(t)*a/2,s,v),p.style.top=i+f.top+v-3+"px",e.nextFrame(m)}if(!this.maskCanvas)return;var f=this._configs;r-=f.left||0,i-=f.top||0;var l=this,c=this.maskCanvas.getContext("2d"),h=Date.now(),p=l.createFloatImage(n,r+1,i-3,s+6,o+6),d=t("ease-out");this.rainDrops=this.rainDrops||[],this.rainDrops.push(p);var v;return this.eraseCircle(c,r,i,s/2),m(),this},n.prototype.clearRainDrop=function(){if(!this.rainDrops||!this.maskedDom)return;for(var e=0,t=this.rainDrops.length;e<t;e++)this.maskedDom.removeChild(this.rainDrops[e]);return this.rainDrops=[],this},n.prototype.setRainDropOpacity=function(e){if(!this.rainDrops||!this.maskedDom)return;for(var t=0,n=this.rainDrops.length;t<n;t++)this.rainDrops[t].style.opacity=e;return this},n.prototype.createFloatDom=function(t,n,r,i,s,o,u){var a,f;t||(t="div"),e.isString(t)?a=document.createElement(t):a=t;var f="position: absolute;";return f+="z-index: "+(u||4)+";",f+="left: "+(n-i/2)+"px;",f+="top: "+(r-s/2)+"px;",f+="width: "+i+"px;",f+="height: "+s+"px;",a.style.cssText+=f,e.isFunction(o)&&o(a),this.maskedDom.appendChild(a),a},n.prototype.createFloatImage=function(t,n,r,i,s){var o,u,a="div";return e.isString(t)||(a=t),o=this.createFloatDom(a,n,r,i,s,function(n){if(e.isString(t)){var r="background-image: url("+t+");background-repeat: no-repeat;";r+="background-size: 100% 100%;",n.style.cssText+=r}},3),o},n.prototype.rotateEraseImage=function(n,r){function m(){if(!v.maskCanvas)return;var t=(Date.now()-i)/n;if(t>1){v.maskedDom.removeChild(v.eraseImage),v.eraseImage=null,r();return}h=h>=360?0:h+20,d="left:"+(u+(f-u)*p(t))+"px;"+"top:"+(a+(l-a)*p(t))+"px;"+"width:"+s*(1-p(t))+"px;"+"height:"+o*(1-p(t))+"px",v.eraseImage.style.cssText+=d,v.eraseImage.style[v.transformStr]="rotate("+h+"deg)",e.nextFrame(m)}var i=Date.now(),s=this.eraseImage.offsetWidth,o=this.eraseImage.offsetHeight,u=window.parseInt(this.eraseImage.style.left),a=window.parseInt(this.eraseImage.style.top),f=this._logoLeft+this.logoImage.offsetWidth/2,l=this._logoTop+this.logoImage.offsetHeight/2,c=-this._configs.angle,h=c,p=t("ease-out"),d,v=this;n?m():(this.maskedDom.removeChild(this.eraseImage),this.eraseImage=null,r())},n.prototype.buildAirIndexTip=function(e,t,n,r){var i=this._configs,s=i.eraseCoverText,o=this,u=this.createFloatDom("div",e,t+r/2+10,n,50,function(e){var t="font-size: 17px; color: #fff; text-align: center;";t+="text-shadow: 1px 1px 1px #040000;",t+="-webkit-text-shadow: 1px 1px 1px #040000;",t+="-moz-text-shadow: 1px 1px 1px #040000;",t+="line-height: 21px;",e.style.cssText+=t},4);return u},n.prototype.buildAirIndexText=function(e,t){return this.airIndexTip.innerHTML='<h3 style="padding: 0; margin: 0; line-height: 20px; font-size: 17px;">空气质量指数</h3><p style="margin:0;padding:5px 0;font-size: 24px;">'+e+'<i style="display: inline-block; min-width: 50px; line-height: 16px;height: 16px; color: #fff; background-color: #0996d1;'+"text-shadow: none;-webkit-text-shadow: none;-moz-text-shadow: none;"+'-webkit-border-radius: 16px;-moz-border-radius: 16px;border-radius: 16px;margin-left:5px;font-style: normal;font-size: 13px;font-weight: normal;vertical-align: top;margin-top: 2px;padding: 0 5px;">'+t+"</i></p>",this},n}),define("sensor/env",[],function(){function e(e){var t=this.os={},n=this.browser={},r=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=e.match(/(Android|Adr);?[\s\/]+([\d.]+)?/),s=e.match(/(iPad).*OS\s([\d_]+)/),o=e.match(/(iPod)(.*OS\s([\d_]+))?/),u=!s&&e.match(/(iPhone\sOS)\s([\d_]+)/),a=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),f=a&&e.match(/TouchPad/),l=e.match(/Kindle\/([\d.]+)/),c=e.match(/Silk\/([\d._]+)/),h=e.match(/(BlackBerry).*Version\/([\d.]+)/),p=e.match(/(BB10).*Version\/([\d.]+)/),d=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),v=e.match(/PlayBook/),m=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),g=e.match(/Firefox\/([\d.]+)/),y=e.match(/MSIE ([\d.]+)/),b=r&&e.match(/Mobile\//)&&!m,w=e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!m,y=e.match(/MSIE\s([\d.]+)/);if(n.webkit=!!r)n.version=r[1];return i&&(t.android=!0,t.version=i[2]),u&&!o&&(t.ios=t.iphone=!0,t.version=u[2].replace(/_/g,".")),s&&(t.ios=t.ipad=!0,t.version=s[2].replace(/_/g,".")),o&&(t.ios=t.ipod=!0,t.version=o[3]?o[3].replace(/_/g,"."):null),a&&(t.webos=!0,t.version=a[2]),f&&(t.touchpad=!0),h&&(t.blackberry=!0,t.version=h[2]),p&&(t.bb10=!0,t.version=p[2]),d&&(t.rimtabletos=!0,t.version=d[2]),v&&(n.playbook=!0),l&&(t.kindle=!0,t.version=l[1]),c&&(n.silk=!0,n.version=c[1]),!c&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0),m&&(n.chrome=!0,n.version=m[1]),g&&(n.firefox=!0,n.version=g[1]),y&&(n.ie=!0,n.version=y[1]),b&&(e.match(/Safari/)||!!t.ios)&&(n.safari=!0),w&&(n.webview=!0),y&&(n.ie=!0,n.version=y[1]),t.tablet=!!(s||v||i&&!e.match(/Mobile/)||g&&e.match(/Tablet/)||y&&!e.match(/Phone/)&&e.match(/Touch/)),t.phone=!!(!t.tablet&&!t.ipod&&(i||u||a||h||p||m&&e.match(/Android/)||m&&e.match(/CriOS\/([\d.]+)/)||g&&e.match(/Mobile/)||y&&e.match(/Touch/))),{browser:n,os:t,canvasSupported:document.createElement("canvas").getContext?!0:!1}}return e(navigator.userAgent)}),define("erasePM25Mask",["sensor/erasableMask","sensor/env"],function(e,t){function r(e){var t=document.createElement("img");t.src=e,t.style.display="none",document.body.appendChild(t),t.addEventListener("load",function(){document.body.removeChild(t)})}function a(e,t,n){window._hmt?_hmt.push(["_trackEvent",e,e+"-"+t,e+"-"+n]):(i.push([e,e+"-"+t,e+"-"+n]),f())}function f(){if(window._hmt){s=i.length;if(s>0){for(var e=0;e<s;e++)_hmt.push(["_trackEvent",i[e][0],i[e][1],i[e][2]]);i=[]}}else setTimeout(function(){f&&f()},500)}function l(e,t){if(localStorage&&e){var n=new Date;n.setDate(n.getDate()+t),n.setHours(0),n.setMinutes(0),n.setSeconds(0),localStorage.setItem(e,n.getTime())}}function c(e){if(localStorage&&e){var n=(new Date).getTime(),r=localStorage.getItem(e)*1;if(r&&n<r)return!1}if(t&&t.os){if(t.os.ios&&parseFloat(t.os.version)<=5)return!1;if(t.os.android&&parseFloat(t.os.version)<=2.3)return!1}return t.browser.firefox?!1:!0}function h(e){return e<=200?70:e>=350?100:100-(350-e)*.1}function p(e,t,n,i){var s=document.getElementById(e),o="background-image: url("+t+");background-repeat: no-repeat;";o+="background-position: top right;",o+="background-size: "+(i.logoWidth||41)+"px "+(i.logoHeight||28)+"px;",s.style.cssText+=o;var f=getComputedStyle(s);"absolute"!==f.position&&"relative"!==f.position&&(s.style.position="relative");var l=document.createElement("a");l.href=n,l.target="_blank",l.style.cssText="position:absolute;width:100%;height:100%;",s.appendChild(l),l.addEventListener(u,function(){a(i.log_name,"mobile","logo_click"),r(i.log_logo_click)},!1)}function S(e,t,n,r,i,s,o){if(E>=5)return;E++,setTimeout(function(){w.rainDrop(m,e,t,n,r,i,s)},o)}function T(){x++,x>=2&&(w.stop(),E=0,x=0,d.mozUserSelect=v,d.webkitUserSelect=v)}function k(t,i,s,o){N.airIndex=t||N.airIndex,N.airIndexText=i||N.airIndexText,N.logoDom=s||N.logoDom,N.maskedDom=o,n(N);var t=N.airIndex,i=N.airIndexText,s=N.logoDom,u=N.logoImage,f=N.logoLink,d=N.logoWidth||41,v=N.logoHeight||28,m=N.angle||45,y=N.maskImage,b=N.top||0,E=N.eraseImage,x=N.eraseHeight,k=N.eraseWidth,L=N.coverImg,A=N.backgroundImage,O=N.backgroundImageWidth||320,M=N.backgroundImageHeight||152;p(s,u,f,N),r(N.log_logo_show),a(N.log_name,"mobile","logo_show");if(C||t<=100)return;if(!c(N.localStorageName))return;C=!0,l(N.localStorageName,N.not_show_without_close),r(N.log_open),a(N.log_name,"mobile","open"),window.addEventListener("resize",function(){if(!w.maskCanvas)return;w.refreshMaskSize()},!1),window.addEventListener("hashchange",function(){w.clearMask(0,T),w.rotateEraseImage(0,T)},!1),w=new e(N.maskedDom||document.body,{alpha:h(t),alphaRadius:10,radius:80,eraseWidth:50,eraseHeight:140,angle:m,eraseImage:E,eraseImageWidth:k,eraseImageHeight:x,eraseCoverImage:L,eraseCoverImageWidth:142,eraseCoverImageHeight:196,eraseCoverText:t,eraseCoverTextDesc:i,backgroundImage:A,backgroundImageWidth:O,backgroundImageHeight:M,logoDom:s,logoWidth:d,logoHeight:v,logoClickStart:!1,onLogoClick:function(){a(N.log_name,"mobile","logo_click"),r(N.log_logo_click)},maskImage:y,top:b,closeImg:g,onStart:function(e,t){S(e-10,t+30,14,14,4e3,400,200),S(e-35,t+20,10,10,4e3,500,1e3),a(N.log_name,"mobile","start"),r(N.log_start)},onClose:function(){w.clearMask(0,T),w.rotateEraseImage(0,T),l(N.localStorageName,N.not_show_with_close)},callback:function(e,t,n){e>=5&&S(t,n+20,8,8,4e3,400,200),e>=15&&S(t,n+30,12,12,5e3,600,200),e>=25&&S(t+20,n+20,9,9,5e3,500,200),e>=40&&(w.clearMask(2e3,T),w.rotateEraseImage(2e3,T))}}),w.start()}var n=function(e){var t=document.createElement("script");t.src=e.log_src;var n=document.head||document.getElementsByTagName("head")[0]||document.body;n.insertBefore(t,n.firstChild)},i=[],s,o="ontouchstart"in window,u=o?"touchstart":"mousedown",d=document.body.style,v=d.mozUserSelect||d.webkitUserSelect;d.mozUserSelect="none",d.webkitUserSelect="none";var m="http://bs.baidu.com/public01/bcs-sensor/images/pm2.5/waterdrop.png",g="http://bs.baidu.com/public01/bcs-sensor/images/ysld/icon_delate.png",y=130,b="轻度污染",w,E=0,x=0,N={airIndex:y,airIndexText:b,logoDom:"logo",logoImage:"//bs.baidu.com/public01/bcs-sensor/images/ysld/logo75x40.png",logoLink:"http://www.esteelauder.com.cn/tmpl/mobile/cms/anr2015/index.tmpl?cm_mmc=baiduPM2.5-_-R1-_-Mobile-_-20150116",logoWidth:50,logoHeight:28,maskImage:"//bs.baidu.com/public01/bcs-sensor/images/ysld/pm_fog_big.png",top:90,alphaRadius:10,radius:100,eraseWidth:52.5,eraseHeight:130,angle:-25,eraseImage:"//bs.baidu.com/public01/bcs-sensor/images/ysld/bottle.png",coverImg:"//bs.baidu.com/public01/bcs-sensor/images/ysld/pm_tip.png",log_src:"//hm.baidu.com/hm.js?5ee8a91a3fd5f238d7debb1734a3695a",log_name:"wise-pm2.5-ysld-20150116",log_logo_show:"http://click.hm.baidu.com/mkt.gif?ai=e47475c49fda573d4d05951334c51ab7&et=0&r="+(new Date).getTime(),log_logo_click:"http://click.hm.baidu.com/clk?7a7a4de5063be0eb579a7dc9926c0f7d",log_open:"http://click.hm.baidu.com/mkt.gif?ai=cd7f5cfd2ad241614156d985f87176dd&et=0",log_start:"http://click.hm.baidu.com/mkt.gif?ai=ddf693174e400ed002767d5c5fc20e5a&et=0",localStorageName:"search_pm25_ysld_close",not_show_without_close:1,not_show_with_close:7};location.href.indexOf("tn=zbios")>-1&&(N.top=0);var C=!1;return k});
