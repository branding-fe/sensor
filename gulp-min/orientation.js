define(["sensor/util"],function(t){var i=function(i){this._hasDeviceOrientation="ondeviceorientation"in window,this._configs={alphaThreshold:0,betaThreshold:0,gammaThreshold:0,timeInterval:300,radians:!1},this._prevAngle={alpha:0,beta:0,gamma:0},t.isFunction(i)?this.setCallback(i):t.extend(this._configs,i||{},!0)};return i.prototype.setCallback=function(t){return this._configs.callback=t,this},i.prototype.start=function(){return this._hasDeviceOrientation?(this._lastOrientationTime=new Date,window.addEventListener("deviceorientation",this,!1),this):!1},i.prototype.stop=function(){return this._hasDeviceOrientation&&window.removeEventListener("deviceorientation",this,!1),this},i.prototype.deviceorientation=function(i){var e=new Date,a=e.getTime()-this._lastOrientationTime.getTime();if(a>this._configs.timeInterval){this._lastOrientationTime=new Date;var n=Math.round(t.isFirefox?-i.alpha:i.alpha),s=Math.round(t.isFirefox?-i.beta:i.beta),o=Math.round(t.isFirefox?-i.gamma:i.gamma);if(this._configs.radians&&(n=n*Math.PI/180,s=s*Math.PI/180,o=o*Math.PI/180),Math.abs(this._prevAngle.alpha-n)>=this._configs.alphaThreshold||Math.abs(this._prevAngle.beta-s)>=this._configs.betaThreshold||Math.abs(this._prevAngle.gamma-o)>=this._configs.gammaThreshold){if(!t.isFunction(this._configs.callback))throw new TypeError("callback is not set or not a function!");this._configs.callback({alpha:n,beta:s,gamma:o}),this._prevAngle.alpha=n,this._prevAngle.beta=s,this._prevAngle.gamma=o}}},i.prototype.handleEvent=function(i){return t.isFunction(this[i.type])?this[i.type](i):void 0},i});