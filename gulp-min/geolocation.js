define(["sensor/util"],function(t){var e=function(e){this._configs={},t.isFunction(e)?this.setCallback(e):t.extend(this._configs,e||{},!0)},n={NOT_SUPPORTED:"当前浏览器不支持GPS定位。",PERMISSION_DENIED:"用户拒绝了定位请求。",POSITION_UNAVAILABLE:"定位信息不可用。",TIMEOUT:"定位超时。",UNKNOWN_ERROR:"未知错误，无法定位。"};return e.prototype.isEnable=function(t){return!!navigator.geolocation},e.prototype.setCallback=function(t){return this.callback=t,this},e.prototype.handlePos=function(t){var e,o;if(t.code){switch(t.code){case"NOT_SUPPORTED":o=n.NOT_SUPPORTED;break;case t.PERMISSION_DENIED:o=n.PERMISSION_DENIED;break;case t.POSITION_UNAVAILABLE:o=n.POSITION_UNAVAILABLE;break;case t.TIMEOUT:o=n.TIMEOUT;break;case t.UNKNOWN_ERROR:o=n.UNKNOWN_ERROR}e={errorMessage:o}}else e=t.coords,e.timestamp=t.timestamp;this.callback.call(null,e)},e.prototype.start=function(){var t=this;return this.isEnable()?navigator.geolocation.getCurrentPosition(function(e){t.handlePos(e)},function(e){t.handlePos(e)}):this.handlePos({code:"NOT_SUPPORTED"}),this},e});