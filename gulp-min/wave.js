define(function(){var t,e,r,n;return e=function(t){function e(t){var e=[].slice.call(arguments,0);if("[object Array]"===Object.prototype.toString.call(e[0])&&(e=e[0]),e.length%2)throw"coordinate count should be even.";this.points=[];for(var r=0;r<e.length;r+=2)this.points.push({x:e[r],y:e[r+1]});this.actualPoints=this.points.slice(0),this.actualPoints.unshift({x:0,y:0}),this.actualPoints.push({x:1,y:1}),this.sampleCache={},this.factorialCache={},this.order=this.actualPoints.length-1,this.splineSampleCount=11,this.splineSamples=[],this.splineInterval=1/(this.splineSampleCount-1),this.calcSplineSamples()}return e.consts={NEWTON_ITERATIONS:4,NEWTON_MIN_SLOPE:.001,SUBDIVISION_PRECISION:1e-7,SUBDIVISION_MAX_ITERATIONS:10},e.prototype.calcSplineSamples=function(){for(var t=0;t<this.splineSampleCount;t++)this.splineSamples[t]=this.getFromT(t*this.splineInterval)},e.prototype.get=function(t){var e=this.getTFromX(t);return this.getFromT(e).y},e.prototype.getTFromX=function(t){for(var r=0,n=0,i=1;i<this.splineSampleCount;i++)if(i===this.splineSampleCount-1||this.splineSamples[i].x>t){r=this.splineInterval*(i-1),n=i-1;break}var o=r+this.splineInterval*(t-this.splineSamples[n].x)/(this.splineSamples[n+1].x-this.splineSamples[n].x),a=this.getDerivativeFromT(o);return a.x>=e.consts.NEWTON_MIN_SLOPE?this.runNewtonRaphsonIterate(t,o):0==a.x?o:this.runBinarySubdivide(t,r,r+this.splineInterval)},e.prototype.runNewtonRaphsonIterate=function(t,r){for(var n=0;n<e.consts.NEWTON_ITERATIONS;n++){var i=this.getDerivativeFromT(r);if(0==i.x)return r;var o=this.getFromT(r).x-t;r-=o/i.x}return r},e.prototype.runBinarySubdivide=function(t,r,n){for(var i,o=0;o<e.consts.SUBDIVISION_MAX_ITERATIONS;o++){i=r+(n-r)/2;var a=this.getFromT(i).x-t;if(a<=e.consts.SUBDIVISION_PRECISION)return i;a>0?n=i:r=i}return i},e.prototype.getFromT=function(t){for(var e=this.getCoefficients(),r=0,n=0,i=this.order,o=0;i>=o;o++)r+=e[o].x*Math.pow(t,o),n+=e[o].y*Math.pow(t,o);return{x:r,y:n}},e.prototype.getCoefficients=function(){if(this.coefficients)return this.coefficients;var t=this.order;this.coefficients=[];for(var e=0;t>=e;e++){for(var r=0,n=0,i=0;e>=i;i++){var o=Math.pow(-1,i+e)/(this.getFactorial(i)*this.getFactorial(e-i));r+=o*this.actualPoints[i].x,n+=o*this.actualPoints[i].y}var a=this.getFactorial(t)/this.getFactorial(t-e);this.coefficients.push({x:a*r,y:a*n})}return this.coefficients},e.prototype.getFactorial=function(t){return this.factorialCache[t]?this.factorialCache[t]:0===t?1:(this.factorialCache[t]=t*this.getFactorial(t-1),this.factorialCache[t])},e.prototype.getDerivativeFromT=function(t){for(var e=this.getCoefficients(),r=0,n=0,i=this.order,o=1;i>=o;o++)r+=o*e[o].x*Math.pow(t,o-1),n+=o*e[o].y*Math.pow(t,o-1);return{x:r,y:n}},e.prototype.getSamples=function(t){if(this.sampleCache[t])return this.sampleCache[t];for(var e=[],r=0;t>r;r++)e.push(this.get(r/(t-1)));this.sampleCache[t]=e},e.prototype.getEasing=function(){var t=this;return function(e){return t.get(e)}},e}({}),r=function(t){var r={Quad:function(t){return t*t},Cubic:function(t){return t*t*t},Quart:function(t){return t*t*t*t},Qunit:function(t){return t*t*t*t*t},Expo:function(t){return t*t*t*t*t*t},Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Back:function(t){return t*t*(3*t-2)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Bounce:function(t){for(var e,r=4;t<((e=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((3*e-2)/22-t,2)}},n=e,i={B2ToLinear:function(){var t=new n(0,.4,.2,.4,.4,.55).getEasing();return function(e){return t(e)}}()};return{easeInCurves:r,fastInCurves:i}}({}),n={repeat:function(t,e){var r=2*e-1;return function(e){var n=e*r,i=Math.floor(n),o=n-i,a=t(o);return i%2&&(a=1-a),a}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}},t=function(t){function i(t){return"[object String]"===Object.prototype.toString.call(t)?a[t]||null:"[object Array]"===Object.prototype.toString.call(t)?new o(t).getEasing():null}var o=e,a={linear:function(t){return t},none:function(t){return 0},full:function(t){return 1},reverse:function(t){return 1-t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},spring:function(t){return 1-Math.cos(4.5*t*Math.PI)*Math.exp(6*-t)}},s=r,u=n,c=s.easeInCurves;for(var h in c){var f=c[h];a["easeIn"+h]=f,a["easeOut"+h]=u.reverse(f),a["easeInOut"+h]=u.reflect(f),a["easeOutIn"+h]=u.reflect(u.reverse(f))}var l=s.fastInCurves;for(var h in l){var f=l[h];a["fastIn"+h]=f,a["fastOut"+h]=u.reverse(f),a["fastInOut"+h]=u.reflect(f),a["fastOutIn"+h]=u.reflect(u.reverse(f))}var p={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]};for(var h in p)a[h]=new o(p[h]).getEasing();return i.register=function(t,e){if("[object Function]"===Object.prototype.toString.call(e))a[t]=e;else{var r=i(e);if(!r)throw"unregisterable";a[t]=r}},i.getMap=function(){return a},i}({})});